const apiBaseUrl="https://pokeapi.co/api/v2/pokemon/",pokemonImageBaseUrl="https://pokeres.bastionbot.org/images/pokemon/";function load(){getPokemonInfo()}async function getPokemonInfo(){let e=getParamId(),n=localStorage.getItem(e);null!==n?(n=JSON.parse(n),n.hasInfoFromApi||(n=await fetchInfoPokemon(n.id),console.log(n)),drawPokemonInfo(n)):(n=await fetchInfoPokemon(e),console.log(n),drawPokemonInfo(n))}async function fetchInfoPokemon(e){try{let n,o=`${apiBaseUrl}${e}/`,t=await fetch(o),i=await t.json(),a=await fetch(i.species.url),s=await a.json();return n=new Pokemon(i.name,o,i.id),i.types.forEach(e=>{n.types.push(e.type.name)}),s.flavor_text_entries.length>0&&(n.description=s.flavor_text_entries[0].flavor_text.split("\f\f"),localStorage.setItem(n.id,JSON.stringify(n))),n.hasInfoFromApi=!0,localStorage.setItem(n.id,JSON.stringify(n)),n}catch(n){return localStorage.getItem(e)}}function getParamId(){let e=location.search.substr(1).split("&"),n=1;return e.forEach(e=>{let o=e.split("=");if("id"===o[0]){let e=parseInt(o[1]);isNaN(e)||(n=e)}}),n}function Pokemon(e,n,o=-1){if(this.name=e,this.url=n,this.id=o,this.description="",this.types=[],this.hasInfoFromApi=!1,-1===this.id){let e=n.split("/"),o=e.length-2;this.id=parseInt(e[o])}}function drawPokemonInfo(e){if(e.hasOwnProperty("id")){document.getElementById("pokemon_container");let n="";e.types.length>0&&(n="bgtype_"+e.types[0]);let o=e.types.map(e=>`<span class="pokemon_container__type bgtype_${e}">${e}</span>`);o=o.join(""),pokemon_container.innerHTML=`<figure id="pokemon_container__image_container" class="${n}">\n                                            <img src="${pokemonImageBaseUrl}${e.id}.png" alt="Imagen de ${e.name}" id="pokemon_container__image">\n                                        </figure>\n                                        <section id="pokemon_container__data">\n                                            <h3 id="pokemon_container__name">${e.name}</h3>\n                                            <p>${o}</p>\n                                            <p id="pokemon_container__description">${e.description}</p>\n                                        </section>`}}window.onload=load;