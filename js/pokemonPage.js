const apiBaseUrl="https://pokeapi.co/api/v2/pokemon/",pokemonImageBaseUrl="https://pokeres.bastionbot.org/images/pokemon/";function load(){getPokemonInfo()}function getPokemonInfo(){let e=getParamId(),n=localStorage.getItem(e);null!==n?(n=JSON.parse(n),n.hasInfoFromApi||(n=fetchInfoPokemon(n.id)),drawPokemonInfo(n)):(n=fetchInfoPokemon(e),drawPokemonInfo(n))}async function fetchInfoPokemon(e){try{let n,t=`${apiBaseUrl}${e}/`,o=await fetch(t),a=await o.json(),i=await fetch(a.species.url),s=await i.json();return n=new Pokemon(a.name,t,a.id),a.types.forEach(e=>{n.types.push(e.type.name)}),s.flavor_text_entries.length>0&&(n.description=s.flavor_text_entries[0].flavor_text,localStorage.setItem(n.id,JSON.stringify(n))),n.hasInfoFromApi=!0,localStorage.setItem(n.id,JSON.stringify(n)),n}catch(n){return localStorage.getItem(e)}}function getParamId(){let e=location.search.substr(1).split("&"),n=1;return e.forEach(e=>{let t=e.split("=");if("id"===t[0]){let e=parseInt(t[1]);isNaN(e)||(n=e)}}),n}function Pokemon(e,n,t=-1){if(this.name=e,this.url=n,this.id=t,this.description="",this.types=[],this.hasInfoFromApi=!1,-1===this.id){let e=n.split("/"),t=e.length-2;this.id=parseInt(e[t])}}function drawPokemonInfo(e){if(e.hasOwnProperty("id")){document.getElementById("pokemon_container");let n="";e.types.length>0&&(n="bgtype_"+e.types[0]);let t=e.types.map(e=>`<span class="pokemon_container__type">${e}</span>`);pokemon_container.innerHTML=`<figure id="pokemon_container__image_container" class="${n}">\n                                            <img src="${pokemonImageBaseUrl}${e.id}.png" alt="Imagen de ${e.name}" id="pokemon_container__image">\n                                        </figure>\n                                        <section id="pokemon_container__data">\n                                            <h3 id="pokemon_container__name">${e.name}</h3>\n                                            <p>${t}</p>\n                                            <p>${e.description}</p>\n                                        </section>`}}window.onload=load;