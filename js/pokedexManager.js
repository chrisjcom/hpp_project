!function(){const n="https://pokeapi.co/api/v2/pokemon/",e="https://pokeres.bastionbot.org/images/pokemon/",t="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/";let o={},i={},r={},s={},a=[],_=[],m={},c={},p=function(n,e,t=-1){return r={},l(n,e,t),r.hasOwnProperty("id")},l=function(n,e,t=-1){-1===t&&(t=u(e)),r={id:t,name:n,url:e,description:"",types:[],hasInfoFromApi:!1,genera:""}},u=function(n){let e=n.split("/"),t=e.length-2;return parseInt(e[t])},d=function(n){return"pkmn"+n},h=function(n=1){return o={},f(n),o.hasOwnProperty("id")&&n===o.id},f=function(n=1){let e=d(n),t=localStorage.getItem(e);o=null===t?{}:JSON.parse(t)},g=function(n={}){return i={},$(n),i.hasOwnProperty("id")&&n.id===i.id},$=function(n={}){if(n.hasOwnProperty("id")){let e=d(n.id);i=n,localStorage.setItem(e,JSON.stringify(n))}else i={}},k=function(e,t,s=!0){return new Promise((m,c)=>{let l={result:!1};a=[],_=[],e>150?m(l):(e+t>150&&(t=150-e),P(e,t)?(a=_,s&&y(),l.result=!0,m(l)):fetch(`${n}?limit=${t}&offset=${e}`).then(n=>n.json()).then(n=>{const{results:e}=n;e.forEach(n=>{p(n.name,n.url)&&(h(r.id)?a.push(o):g(r)?a.push(i):a.push(r))}),a.length>0&&(l.result=!0),s&&y(),m(l)}).catch(n=>{c(n)}))})},y=function(){let n=document.getElementById("pokemons_container"),e="";a.forEach(n=>{e+=w(n)}),n.innerHTML=n.innerHTML+e},w=function(n={}){let t="";return n.hasOwnProperty("id")&&n.hasOwnProperty("name")&&(t=`<a class="pokemon_item" href="./pokemon.html?id=${n.id}">\n                                <header class="pokemon_item__header">\n                                    <span class="pokemon_item__header__id">${n.id}</span>\n                                    <span class="pokemon_item__header__name">${n.name}</span>\n                                </header>\n                                <img src="${e}${n.id}.png" alt="Imagen de ${n.name}" class="pokemon_item__image"></img>\n                            </a>`),t},P=function(n,e){return I(n,e),_.length===e},I=function(n,e){let t=n+1,i=n+e;for(_=[];t<=i;t++)h(t)&&_.push(o)},O=function(n=1){s={},n>150?n=150:n<1&&(n=1);let e=n-2;e<1&&(e=1),k(e,3,!1).then(e=>{e.result&&(h(n)?o.hasInfoFromApi?(s=o,L()):v(n).then(n=>{n.result&&L()}).catch(n=>{console.log(n)}):e.result&&v(n).then(n=>{n.result&&L()}).catch(n=>{console.log(n)}))}).catch(n=>{console.log(n)})},v=function(e=1){return new Promise((t,o)=>{let a={result:!1},_=`${n}${e}`;fetch(_).then(n=>n.json()).then(n=>{const{name:t,types:o,species:m}=n;if(p(t,_,e))return r.types=E(o),r.hasInfoFromApi=!0,g(r)?(s=i,a.result=!0):(s=r,a.result=!0),fetch(m.url);throw new Error("Pokemon couldn't be created")}).then(n=>n.json()).then(n=>{const{flavor_text_entries:e,genera:o}=n;s.description=S(e),s.genera=b(o),g(s)&&(a.result=!0),t(a)}).catch(n=>{o(n)})})},E=function(n=[]){let e=[];return n.forEach(n=>{e.push(n.type.name)}),e},S=function(n=[]){let e="";return n.length>0&&(e=n[0].flavor_text.toString()),e},b=function(n=[]){let e="",t=n.filter(n=>"en"===n.language.name);return t.length>0&&(e=t[0].genus),e},L=function(){let n=document.getElementById("pokemon_container"),e=document.getElementById("previous_pokemon"),t=document.getElementById("next_pokemon");n.innerHTML=x(),M(s.id)&&(e.innerHTML=H(m,!0)),j(s.id)&&(t.innerHTML=H(c,!1))},x=function(){let n="",t="",o="";if(s.hasOwnProperty("id")){const{types:i,name:r,id:a,description:_,genera:m}=s;i.length>0&&(t=i[0]),o=i.map(n=>`<span class="pokemon_container__type pokemon_container__type--${n}">${n}</span>`),o=o.join(""),n=`<figure id="pokemon_container__image_container" class="pokemon_container__image_container--${t}">\n                                <img src="${e}${a}.png" alt="Imagen de ${r}" id="pokemon_container__image">\n                            </figure>\n                            <section id="pokemon_container__data">\n                                <p><span id="pokemon_container__name">${a} - ${r}</span>${o}</p>\n                                <p id="pokemon_container__genera">${m}</p>\n                                <p id="pokemon_container__description">${_}</p>\n                            </section>`}return n},H=function(n={},e=!0){let o="",i="< ";return n.hasOwnProperty("id")&&(e?o=`<a class="nav_menu__list__item__link" href="./pokemon.html?id=${n.id}">\n                                <span class="nav_menu__list__item__name">${i}${n.id}<span class="nav_menu__list__item__no_mobile"> - ${n.name}</span></span>\n                                <img class="nav_menu__list__item__image" src="${t}${n.id}.png" alt="Sprite de ${n.name}">\n                            </a>`:(i=" >",o=`<a class="nav_menu__list__item__link" href="./pokemon.html?id=${n.id}">\n                                <img class="nav_menu__list__item__image" src="${t}${n.id}.png" alt="Sprite de ${n.name}">\n                                <span class="nav_menu__list__item__name">${n.id}<span class="nav_menu__list__item__no_mobile"> - ${n.name}</span>${i}</span>\n                            </a>`)),o},M=function(n){m={};let e=n-1;return e>=1&&T(e),m.hasOwnProperty("id")},T=function(n=1){h(n)&&(m=o)},j=function(n){c={};let e=n+1;return e<=150&&A(e),c.hasOwnProperty("id")},A=function(n=1){h(n)&&(c=o)};window.hasOwnProperty("pokedex")||(window.pokedex={getListOfPokemons:k,getPokemonInfo:O})}();