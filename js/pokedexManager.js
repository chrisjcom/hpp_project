!function(){const n="https://pokeapi.co/api/v2/pokemon/",e="https://pokeres.bastionbot.org/images/pokemon/",t="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/";let o={},i={},r={},a={},s=[],_=[],l={},m={},c=function(n,e,t=-1){return r={},p(n,e,t),r.hasOwnProperty("id")},p=function(n,e,t=-1){-1===t&&(t=u(e)),r={id:t,name:n,url:e,description:"",types:[],hasInfoFromApi:!1,genera:""}},u=function(n){let e=n.split("/"),t=e.length-2;return parseInt(e[t])},d=function(n){return"pkmn"+n},h=function(n=1){return o={},f(n),o.hasOwnProperty("id")&&n===o.id},f=function(n=1){let e=d(n),t=localStorage.getItem(e);o=null===t?{}:JSON.parse(t)},g=function(n={}){return i={},$(n),i.hasOwnProperty("id")&&n.id===i.id},$=function(n={}){if(n.hasOwnProperty("id")){let e=d(n.id);i=n,localStorage.setItem(e,JSON.stringify(n))}else i={}},k=function(e,t,a=!0){return new Promise((l,m)=>{let p={result:!1};s=[],_=[],e>150?l(p):(e+t>150&&(t=150-e),P(e,t)?(s=_,a&&y(),p.result=!0,l(p)):fetch(`${n}?limit=${t}&offset=${e}`).then(n=>n.json()).then(n=>{const{results:e}=n;e.forEach(n=>{c(n.name,n.url)&&(h(r.id)?s.push(o):g(r)?s.push(i):s.push(r))}),s.length>0&&(p.result=!0),a&&y(),l(p)}).catch(n=>{m(n)}))})},y=function(){let n=document.getElementById("pokemons_container"),e="";s.forEach(n=>{e+=w(n)}),n.innerHTML=n.innerHTML+e},w=function(n={}){let t="";return n.hasOwnProperty("id")&&n.hasOwnProperty("name")&&(t=`<a class="pokemon_item" href="./pokemon.html?id=${n.id}">\n                                <header class="pokemon_item__header">\n                                    <span class="pokemon_item__header__id">${n.id}</span>\n                                    <span class="pokemon_item__header__name">${n.name}</span>\n                                </header>\n                                <img src="${e}${n.id}.png" alt="Imagen de ${n.name}" class="pokemon_item__image"></img>\n                            </a>`),t},P=function(n,e){return v(n,e),_.length===e},v=function(n,e){let t=n+1,i=n+e;for(_=[];t<=i;t++)h(t)&&_.push(o)},I=function(n=1){a={},n>150?n=150:n<1&&(n=1);let e=n-2;e<1&&(e=1),k(e,3,!1).then(e=>{e.result&&(h(n)?o.hasInfoFromApi?(a=o,S()):O(n).then(n=>{n.result&&S()}).catch(n=>{console.log(n)}):e.result&&O(n).then(n=>{n.result&&S()}).catch(n=>{console.log(n)}))}).catch(n=>{console.log(n)})},O=function(e=1){return new Promise((t,o)=>{let s={result:!1},_=`${n}${e}`;fetch(_).then(n=>n.json()).then(n=>{const{name:t,types:o,species:l}=n;if(c(t,_,e))return r.types=E(o),r.hasInfoFromApi=!0,g(r)?(a=i,s.result=!0):(a=r,s.result=!0),fetch(l.url);throw new Error("Pokemon couldn't be created")}).then(n=>n.json()).then(n=>{const{flavor_text_entries:e,genera:o}=n;a.description=x(e),a.genera=T(o),g(a)&&(s.result=!0),t(s)}).catch(n=>{o(n)})})},E=function(n=[]){let e=[];return n.forEach(n=>{e.push(n.type.name)}),e},x=function(n=[]){let e="";return flavorTextEntriesFiltered=n.filter(n=>"en"===n.language.name),flavorTextEntriesFiltered.length>0&&(e=flavorTextEntriesFiltered[0].flavor_text.toString()),e},T=function(n=[]){let e="",t=n.filter(n=>"en"===n.language.name);return t.length>0&&(e=t[0].genus),e},S=function(){let n=document.getElementById("pokemon_container"),e=document.getElementById("previous_pokemon"),t=document.getElementById("next_pokemon");n.innerHTML=b(),L(a.id)&&(e.innerHTML=F(l,!0)),M(a.id)&&(t.innerHTML=F(m,!1))},b=function(){let n="",t="",o="";if(a.hasOwnProperty("id")){const{types:i,name:r,id:s,description:_,genera:l}=a;i.length>0&&(t=i[0]),o=i.map(n=>`<span class="pokemon_container__type pokemon_container__type--${n}">${n}</span>`),o=o.join(""),n=`<figure id="pokemon_container__image_container" class="pokemon_container__image_container--${t}">\n                                <img src="${e}${s}.png" alt="Imagen de ${r}" id="pokemon_container__image">\n                            </figure>\n                            <section id="pokemon_container__data">\n                                <p><span id="pokemon_container__name">${s} - ${r}</span>${o}</p>\n                                <p id="pokemon_container__genera">${l}</p>\n                                <p id="pokemon_container__description">${_}</p>\n                            </section>`}return n},F=function(n={},e=!0){let o="",i="< ";return n.hasOwnProperty("id")&&(e?o=`<a class="nav_menu__list__item__link" href="./pokemon.html?id=${n.id}">\n                                <span class="nav_menu__list__item__name">${i}${n.id}<span class="nav_menu__list__item__no_mobile"> - ${n.name}</span></span>\n                                <img class="nav_menu__list__item__image" src="${t}${n.id}.png" alt="Sprite de ${n.name}">\n                            </a>`:(i=" >",o=`<a class="nav_menu__list__item__link" href="./pokemon.html?id=${n.id}">\n                                <img class="nav_menu__list__item__image" src="${t}${n.id}.png" alt="Sprite de ${n.name}">\n                                <span class="nav_menu__list__item__name">${n.id}<span class="nav_menu__list__item__no_mobile"> - ${n.name}</span>${i}</span>\n                            </a>`)),o},L=function(n){l={};let e=n-1;return e>=1&&H(e),l.hasOwnProperty("id")},H=function(n=1){h(n)&&(l=o)},M=function(n){m={};let e=n+1;return e<=150&&j(e),m.hasOwnProperty("id")},j=function(n=1){h(n)&&(m=o)};window.hasOwnProperty("pokedex")||(window.pokedex={getListOfPokemons:k,getPokemonInfo:I})}();