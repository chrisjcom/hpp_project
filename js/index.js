const apiBaseUrl="https://pokeapi.co/api/v2/pokemon/",pokemonImageBaseUrl="https://pokeres.bastionbot.org/images/pokemon/";let limit=20;function load(){getListOfPokemons(0)}function getListOfPokemons(e){if(validateIfRangeOfPokemonsInLocalStorage(e)){drawPokemonsInContainer(getPokemonsInLocalStorageByRange(e))}else fetch(`${apiBaseUrl}?limit=${limit}&offset=${e}`).then(e=>e.json()).then(e=>{let o=e.results,n=[];o.forEach(e=>{let o=new Pokemon(e.name,e.url),t=localStorage.getItem(o.id);null===t?(localStorage.setItem(o.id,JSON.stringify(o)),n.push(o)):n.push(JSON.parse(t))}),drawPokemonsInContainer(n)}).catch(e=>{console.log(e)})}function Pokemon(e,o,n=-1){if(this.name=e,this.url=o,this.id=n,this.description="",this.types=[],this.hasInfoFromApi=!1,-1===this.id){let e=o.split("/"),n=e.length-2;this.id=parseInt(e[n])}}function validateIfRangeOfPokemonsInLocalStorage(e){let o=0,n=e+1,t=e+limit;for(;n<=t;n++)null!==localStorage.getItem(n)&&o++;return console.log({totalOfPokemonInStorage:o,limit:limit}),o===limit}function getPokemonsInLocalStorageByRange(e){let o=[],n=e+1,t=e+limit;for(;n<=t;n++){let e=localStorage.getItem(n);null!==e&&o.push(JSON.parse(e))}return o}function drawPokemonsInContainer(e=[]){try{let o=document.getElementById("pokemons_container");e.forEach(e=>{let n=getPokemonListItemHtml(e);""!==n&&(o.innerHTML=o.innerHTML+n)})}catch(e){console.log(e)}}function getPokemonListItemHtml(e){return e.hasOwnProperty("name")&&e.hasOwnProperty("id")?`<a class="pokemon_item" href="./pokemon.html?id=${e.id}">\n                    <header class="pokemon_item__header">\n                        <span class="pokemon_item__header__id">${e.id}</span>\n                        <span class="pokemon_item__header__name">${e.name}</span>\n                    </header>\n                    <img src="${pokemonImageBaseUrl}${e.id}.png" alt="Imagen de ${e.name}" class="pokemon_item__image"></img>\n                </a>`:""}window.onload=load;